<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.RadioButton?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<BorderPane styleClass="main-container" stylesheets="@styles.css" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.redsismica.cerrarorden.boundary.PantallaCierreOrdenInspeccion">

    <!-- Panel Lateral -->
    <left>
        <VBox prefWidth="350" spacing="10" styleClass="side-panel">

            <!-- Header del Panel -->
            <VBox spacing="15" styleClass="system-header">
                <Label styleClass="system-title,white-text" text="SISTEMA SÃSMICO" />
                <Separator styleClass="header-separator" />
            </VBox>

            <!-- MenÃº de NavegaciÃ³n -->
            <VBox spacing="8" styleClass="navigation-menu">
                <Label styleClass="navigation-label,light-blue-text" text="NAVEGACIÃ“N" />

                <Button fx:id="btnCerrarInspeccion" onAction="#opcDarCierreOrdenInspeccion" prefHeight="45" prefWidth="240" styleClass="primary-button" text="ðŸ” Cerrar Orden de InspecciÃ³n" />

                <Button prefHeight="40" prefWidth="240" styleClass="secondary-button" text="ðŸ“Š Dashboard" />

                <Button prefHeight="40" prefWidth="240" styleClass="secondary-button" text="âš™ï¸ ConfiguraciÃ³n" />
            </VBox>

            <!-- Espaciador que empuja el botÃ³n hacia abajo -->
            <Region VBox.vgrow="ALWAYS" />

            <VBox spacing="10" styleClass="exit-section">
                <Separator styleClass="exit-separator" />
                <Button fx:id="btnSalir" onAction="#salir" prefHeight="45" prefWidth="240" styleClass="exit-button" text="ðŸšª SALIR" />
            </VBox>
        </VBox>
    </left>

    <!-- Contenido Principal -->
    <center>
        <StackPane>
            <!-- Panel de Bienvenida -->
            <VBox fx:id="panelBienvenida" spacing="30" styleClass="welcome-panel">
                <Label styleClass="welcome-title,white-text" text="ðŸŒ SISTEMA DE RED SÃSMICA" />
                <Label styleClass="welcome-subtitle,light-gray-text" text="Seleccione 'Cerrar Orden de InspecciÃ³n' para comenzar" />
            </VBox>

            <!-- Panel Principal de InspecciÃ³n -->
            <ScrollPane fx:id="scrollInspeccion" fitToWidth="true" styleClass="scroll-panel" visible="false">
                <VBox spacing="25" styleClass="main-content">

                    <!-- Header -->
                    <HBox spacing="15" styleClass="main-header">
                        <Label styleClass="main-icon" text="ðŸ”" />
                        <Label styleClass="main-title,white-text" text="CERRAR ORDEN DE INSPECCIÃ“N" />
                    </HBox>

                    <!-- SecciÃ³n 1: Ã“rdenes de InspecciÃ³n -->
                    <VBox spacing="15" styleClass="section-container">

                        <HBox spacing="10" styleClass="section-header">
                            <Label styleClass="section-icon" text="ðŸ“‹" />
                            <Label styleClass="section-title" text="Ã“RDENES DE INSPECCIÃ“N COMPLETADAS" />
                        </HBox>

                        <HBox fx:id="lblOrdenInspeccion" visible="false" managed="false" spacing="10" styleClass="section-header">
                            <Label styleClass="table-info-label" text="Debe seleccionar una orden de inspeccion de la tabla:" />
                        </HBox>

                        <TableView fx:id="tablaOrdenes" prefHeight="200" styleClass="orders-table">
                            <columns>
                                <TableColumn fx:id="colNumOrden" text="NÂ° Orden" style="-fx-alignment: CENTER;" sortable="false"/>
                                <TableColumn fx:id="colFechaFinalizacion" text="Fecha FinalizaciÃ³n" style="-fx-alignment: CENTER;" sortable="false"/>
                                <TableColumn fx:id="colEstacion" text="EstaciÃ³n SismolÃ³gica" style="-fx-alignment: CENTER;" sortable="false"/>
                                <TableColumn fx:id="colSismografo" text="ID SismÃ³grafo" style="-fx-alignment: CENTER;" sortable="false"/>
                            </columns>
                        </TableView>
                    </VBox>

                    <!-- SecciÃ³n 2: ObservaciÃ³n de Cierre -->
                    <VBox fx:id="seccionObservacion" disable="true" spacing="15" styleClass="disabled-section">

                        <HBox spacing="10" styleClass="section-header">
                            <Label text="ðŸ“" />
                            <Label styleClass="section-title" text="OBSERVACIÃ“N DE CIERRE" />
                        </HBox>

                        <VBox spacing="10">
                            <Label styleClass="observation-label" text="Ingrese la observaciÃ³n para el cierre de la orden:" />
                            <TextArea fx:id="txtObservacion" prefRowCount="4" styleClass="observation-textarea" wrapText="true" />
                        </VBox>

                    </VBox>

                    <!-- SecciÃ³n 3: Motivos Fuera de Servicio -->
                    <VBox fx:id="seccionMotivos" disable="true" spacing="15" styleClass="disabled-section">

                        <HBox spacing="10" styleClass="section-header">
                            <Label text="âš™ï¸" />
                            <Label styleClass="section-title" text="ESTADO DEL SISMÃ“GRAFO" />
                        </HBox>

                        <!-- InformaciÃ³n del SismÃ³grafo -->
                        <VBox spacing="10" styleClass="info-container">
                            <Label styleClass="info-title" text="ðŸ” SISMÃ“GRAFO SELECCIONADO" />
                            <Label fx:id="lblIdSismografo" styleClass="info-label" />
                        </VBox>

                        <!-- SelecciÃ³n de Estado -->
                        <VBox spacing="10">
                            <Label styleClass="state-label" text="Habilitado par establecer como fuera de servicio:" />

                            <HBox spacing="20" styleClass="radio-container">
                                <RadioButton fx:id="rbOnline" styleClass="radio-online" text="ON-LINE" />
                                <RadioButton fx:id="rbFueraServicio" styleClass="radio-offline" text="FUERA DE SERVICIO" />
                            </HBox>
                        </VBox>

                        <VBox fx:id="vboxMotivosFuera" managed="false" spacing="10" visible="false">
                            <Label text="Seleccione uno o varios motivos para poner el sismÃ³grafo fuera de servicio:" />
                        </VBox>
                    </VBox>

                    <HBox spacing="15" styleClass="action-buttons">
                        <Button fx:id="btnCancelar" onAction="#cancelarProceso" styleClass="cancel-button" text="âŒ Cancelar" />

                        <Button fx:id="buttonConfirmar" onAction="#solicitarConfirmacionCierreOrden" styleClass="confirm-button" text="âœ… CONFIRMAR CIERRE DE ORDEN" />
                    </HBox>

                    <!-- Espaciado final -->
                    <VBox prefHeight="30" />
                </VBox>
            </ScrollPane>
        </StackPane>
    </center>

    <!-- Barra de Estado -->
    <bottom>
        <HBox spacing="20" styleClass="status-bar">
            <Label styleClass="status-icon" text="ðŸŒ" />
            <Label fx:id="lblSistema" styleClass="status-label,white-text" text="Sistema conectado - Listo para procesar Ã³rdenes" />
            <Region HBox.hgrow="ALWAYS" />
        </HBox>
    </bottom>

</BorderPane>